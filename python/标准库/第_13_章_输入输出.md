# <font style="color:rgb(0,0,0);"> 简介 </font>
<br/>color2
<font style="color:rgb(0,0,0);">程序如果必须与用户进行交互。</font>

<br/>

<font style="color:rgb(0,0,0);">例如，想要从用户那里获取输入然后将一些结果打印。可以分别使用 </font>`<font style="color:rgb(0,0,0);">input() </font>`<font style="color:rgb(0,0,0);">和 </font>`<font style="color:rgb(0,0,0);">print()</font>`<font style="color:rgb(0,0,0);"> 函数来实现。 </font>

<font style="color:rgb(0,0,0);">对于输入，也可以使用 </font>`<font style="color:rgb(0,0,0);">str(string) </font>`<font style="color:rgb(0,0,0);">类的各种方法。例如，能够使用 </font>`<font style="color:rgb(0,0,0);">rjust</font>`<font style="color:rgb(0,0,0);"> 方法来得到一个按一定宽度右对齐的字符串。利用 </font>`<font style="color:rgb(0,0,0);">help(str)</font>`<font style="color:rgb(0,0,0);"> 获得更多详情。 </font>

<font style="color:rgb(0,0,0);">另一个常用的输入/输出类型是处理文件。创建、读和写文件的能力是许多程序所必需的</font>

# <font style="color:rgb(0,0,0);"> 用户输入 </font>
```python
#!/usr/bin/python 
# user_input.py 

def reverse(text):
    return text[::-1]


def is_palindrome(text):
    return text == reverse(text)


something = input("Enter text: ")
if is_palindrome(something):
    print("Yes, it is a palindrome")
else:
    print("No, it is not a palindrome")
```

输出：

```python
$ python3 io_input.py
Enter text: sir
No, it is not a palindrome

$ python3 io_input.py
Enter text: madam
Yes, it is a palindrome

$ python3 io_input.py
Enter text: racecar
Yes, it is a palindrome
```

<font style="color:rgb(0,0,0);">如何工作： </font>

<font style="color:rgb(0,0,0);">使用了切片特性来将文本逆转。已经知道了如何使用 </font>`<font style="color:rgb(0,0,0);">seq[a:b]</font>`<font style="color:rgb(0,0,0);"> 代码从位置 a 到位置 b 来形成切片。可以给其提供第三个参数，这个参数决定了切片的步长。默认步长是 1，因为要返回文本的连续部分。给一个负的步长，如 -1 会将文本逆转。 </font>

`<font style="color:rgb(0,0,0);">input()</font>`<font style="color:rgb(0,0,0);"> 函数用一个字符串作为其参数，然后显示给用户。然后等待用户键入一些东西，按返回键。一旦用户键入，input() 函数就返回该文本。 </font>

<font style="color:rgb(0,0,0);">获得文本将其逆转。如果原始文本和逆转后的文本是一样的，文本是 </font>回文<font style="color:rgb(0,0,0);">。 </font>

**<font style="color:rgb(0,0,0);">课外练习： </font>**

<font style="color:rgb(0,0,0);">检查文本是不是回文也应该忽略、空格和大小写。例如，</font>`<font style="color:rgb(0,0,0);">"Rise to vote,sir."</font>`<font style="color:rgb(0,0,0);"> 也是回文，但当前的程序并不能指明。能改进上面的程序来检查出这是回文吗？ </font>

**<font style="color:rgb(0,0,0);">译者注：课外练习答案 </font>**

```python
#!/usr/bin/python 
# user_input.py 
 
import string 

def reverse(text): 
    return text[::-1] 
 
def is_palindrome(text): 
    text = text.lower() 
    text = text.replace(' ','') 
    for char in string.punctuation: 
        text = text.replace(char,'') 
    return text == reverse(text) 
    
def main(): 
    something = input('Enter text:') 
    if (is_palindrome(something)): 
        print("Yes, “{0}” is a palindrome".format(something)) 
    else: 
        print("No“,{0}” is not a palindrome".format(something)) 
 
if __name__ == '__main__': 
    main() 
else: 
    print("user_input.py was imported!") 
```

# <font style="color:rgb(0,0,0);"> 文件 </font>
<font style="color:rgb(0,0,0);">可以通过创建一个 fifile 类的对象来打开一个文件，分别使用 fifile 类的 read、 readline 或 write 方法来恰当地读写文件。对文件的读写能力依赖于在打开文件时指定的模式。最后，当完成对文件的操作的时候，调用 close 方法来告诉 Python 完成了对文件的使用。 </font>

<font style="color:rgb(0,0,0);">例子： </font>

```python
#!/usr/bin/python 
# Filename: using_file.py 

poem = '''\
Programming is fun
When the work is done
if you wanna make your work also fun:
    use Python!
'''

# Open for 'w'riting
f = open('poem.txt', 'w')
# Write text to file
f.write(poem)
# Close the file
f.close()

# If no mode is specified,
# 'r'ead mode is assumed by default
f = open('poem.txt')
while True:
    line = f.readline()
    # Zero length indicates EOF
    if len(line) == 0:
        break
    # The `line` already has a newline
    # at the end of each line
    # since it is reading from a file.
    print(line, end='')
# close the file
f.close()
```

<font style="color:rgb(0,0,0);">输出：</font>

```python
$ python3 io_using_file.py
Programming is fun
When the work is done
if you wanna make your work also fun:
    use Python!
```

<font style="color:rgb(0,0,0);">如何工作： </font>

<font style="color:rgb(0,0,0);">首先，通过指明希望打开的文件和模式来创建一个 fifile 类的实例。模式可以为读模式（’r’）、写模式（’w’）或追加模式（’a’）。事实上还有多得多的模式可以使用，可以使用 help(fifile) 来了解它们的详情。默认情况下，open() 认为文件是’t’ext 文件，且用’r’ead 模式打开。在的例子中，首先用写模式打开文件，然后使用 fifile 类的 write 方法来写文件，最后用 close 关闭这个文件。 </font>

<font style="color:rgb(0,0,0);">接下来，再一次打开同一个文件来读文件。如果没有指定模式，读模式会作为默认的模式。在一个循环中，使用 readline 方法读文件的每一行。这个方法返回包括行末换行符的一个完整行。所以，当一个空的字符串被返回的时候，即表示文件末已经到达了，于是停止循环。 </font>

<font style="color:rgb(0,0,0);">默认情况下，print() 函数将文本和自动生成的新行打印到屏幕。指定 end=”来制约新行的产生，因为从文件中读出的行已经用了换行符。最后，关闭文件。现在，来看一下</font>`<font style="color:rgb(0,0,0);">poem.txt </font>`<font style="color:rgb(0,0,0);">文件的内容来验证程序读写的确都是正常的。 </font>

# <font style="color:rgb(0,0,0);">pickle 模块 </font>
<font style="color:rgb(0,0,0);">Python 提供了一个叫做 pickle 的标准模块，使用该模块可以将任意对象存储在文件中，之后又可以将其完整地取出来。这被称为持久地存储对象。 </font>

<font style="color:rgb(0,0,0);">例子： </font>

```python
 #!/usr/bin/python 
# Filename: pickling.py 
import pickle

# The name of the file where we will store the object
shoplistfile = 'shoplist.data'
# The list of things to buy
shoplist = ['apple', 'mango', 'carrot']

# Write to the file
f = open(shoplistfile, 'wb')
# Dump the object to a file
pickle.dump(shoplist, f)
f.close()

# Destroy the shoplist variable
del shoplist

# Read back from the storage
f = open(shoplistfile, 'rb')
# Load the object from the file
storedlist = pickle.load(f)
print(storedlist)
f.close()
```

<font style="color:rgb(0,0,0);">输出：</font>

```python
$ python io_pickle.py
['apple', 'mango', 'carrot']
```

<font style="color:rgb(0,0,0);">如何工作： </font>

<font style="color:rgb(0,0,0);">为了在文件里储存一个对象，首先以写，二进制模式打开一个 fifile 对象，然后调用 pickle 模块的 dump 函数，这个过程称为 pickling 。 </font>

<font style="color:rgb(0,0,0);">接下来，用 pickle 模块的返回对象的 load 函数重新取回对象。这个过程称之为 </font>`<font style="color:rgb(0,0,0);">unpickling</font>`<font style="color:rgb(0,0,0);"> 。 </font>



