[08-转换数据类型.pdf](https://www.yuque.com/attachments/yuque/0/2025/pdf/2639475/1753354065525-5bd2495e-a197-41b9-ac05-521d6a9c8cf0.pdf)

# <font style="color:rgb(0, 0, 0);">Python 的数值精度处理</font>
## <font style="color:rgb(0, 0, 0);">浮点数精度</font>
+ **<font style="color:rgb(0, 0, 0);">Python</font>**<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">默认使用</font><font style="color:rgb(0, 0, 0);"> </font>**<font style="color:rgb(0, 0, 0);">双精度浮点数</font>**<font style="color:rgb(0, 0, 0);">（等价于 C 的</font><font style="color:rgb(0, 0, 0);"> </font>`**<font style="color:rgb(0, 0, 0);">double</font>**`<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">或 Go 的</font><font style="color:rgb(0, 0, 0);"> </font>`**<font style="color:rgb(0, 0, 0);">float64</font>**`<font style="color:rgb(0, 0, 0);">）</font>

```python
a = 3.141592653589793
print(a.hex())  # 输出十六进制表示，验证精度
```

+ **<font style="color:rgb(0, 0, 0);">Go</font>**<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">需显式指定精度：</font>

```go
var a float32 = 3.14
var b float64 = 3.141592653589793
```

## <font style="color:rgb(0, 0, 0);">整数类型</font>
+ **<font style="color:rgb(0, 0, 0);">Python</font>**<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">的</font><font style="color:rgb(0, 0, 0);"> </font>`**<font style="color:rgb(0, 0, 0);">int</font>**`<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">类型自动支持</font><font style="color:rgb(0, 0, 0);"> </font>**<font style="color:rgb(0, 0, 0);">任意精度</font>**<font style="color:rgb(0, 0, 0);">：</font>

```python
big_num = 123456789012345678901234567890
```

+ **<font style="color:rgb(0, 0, 0);">Go</font>**<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">需明确指定整数类型：</font>

```python
var a int32 = 42
var b int64 = 9223372036854775807
```

# <font style="color:rgb(0, 0, 0);"> 变量类型声明机制</font>
## <font style="color:rgb(0, 0, 0);">动态类型特性</font>
```python
x = 42          # int
x = "hello"     # 动态变为 str
x = [1, 2, 3]   # 动态变为 list
```

## <font style="color:rgb(0, 0, 0);">类型提示（可选）</font>
```python
def add(a: int, b: int) -> int:
    return a + b

value: list[str] = ["a", "b"]
```

**<font style="color:rgb(0, 0, 0);">与 Go 对比</font>**<font style="color:rgb(0, 0, 0);">：</font>

| **<font style="color:rgb(0, 0, 0);">特性</font>** | **<font style="color:rgb(0, 0, 0);">Python</font>** | **<font style="color:rgb(0, 0, 0);">Go</font>** |
| :--- | :--- | :--- |
| <font style="color:rgb(0, 0, 0);">变量声明</font> | **<font style="color:#DF2A3F;">无需类型</font>** | <font style="color:rgb(0, 0, 0);">必须声明类型</font> |
| <font style="color:rgb(0, 0, 0);">类型检查</font> | <font style="color:rgb(0, 0, 0);">运行时动态检查</font> | <font style="color:rgb(0, 0, 0);">编译期静态检查</font> |
| <font style="color:rgb(0, 0, 0);">类型注解</font> | <font style="color:rgb(0, 0, 0);">可选（Type Hints）</font> | <font style="color:rgb(0, 0, 0);">强制类型声明</font> |


# <font style="color:rgb(0, 0, 0);">类型系统深度对比</font>
## <font style="color:rgb(0, 0, 0);">类型转换示例</font>
**<font style="color:rgb(0, 0, 0);">Python</font>**<font style="color:rgb(0, 0, 0);">：</font>

<font style="color:#DF2A3F;">直接就是</font>`<font style="color:#DF2A3F;">类型（变量）</font>`<font style="color:#DF2A3F;">？</font>

```python
num_str = "42"
num = int(num_str)       # 显式转换
pi = float("3.14")
flag = bool("")          # False
```

**<font style="color:rgb(0, 0, 0);">Go</font>**<font style="color:rgb(0, 0, 0);">：</font>

```go
numStr := "42"
num, _ := strconv.Atoi(numStr)  // 必须显式转换
pi, _ := strconv.ParseFloat("3.14", 64)
flag := len("") == 0           // false
```

## <font style="color:rgb(0, 0, 0);">类型检查方式</font>
**<font style="color:rgb(0, 0, 0);">Python</font>**<font style="color:rgb(0, 0, 0);">：</font>

+ `<font style="color:#DF2A3F;">isinstance</font>`<font style="color:#DF2A3F;">？？？</font>
+ `<font style="color:#DF2A3F;">type</font>`<font style="color:#DF2A3F;">？？？</font>

```python
value = 3.14
print(isinstance(value, float))  # True
print(type(value) is float)       # True
```

**<font style="color:rgb(0, 0, 0);">Go</font>**<font style="color:rgb(0, 0, 0);">：</font>

```go
func checkType(v interface{}) {
    switch v.(type) {
        case float64:
        fmt.Println("float64")
        default:
        fmt.Println("other")
    }
}
```

# <font style="color:rgb(0, 0, 0);">最佳实践指南</font>
## <font style="color:rgb(0, 0, 0);">数值精度控制</font>
<font style="color:#DF2A3F;">都是导包做的？？</font>

+ <font style="color:rgb(0, 0, 0);">使用</font><font style="color:rgb(0, 0, 0);"> </font>`**<font style="color:rgb(0, 0, 0);">decimal</font>**`<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">模块处理金融计算：</font>

```python
from decimal import Decimal
price = Decimal('9.99')  # 避免浮点误差
```

+ <font style="color:rgb(0, 0, 0);">使用</font><font style="color:rgb(0, 0, 0);"> </font>`**<font style="color:rgb(0, 0, 0);">numpy</font>**`<font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">获得类似 Go 的类型控制：</font>

```python
import numpy as np
arr = np.array([1,2,3], dtype=np.float32)
```

## <font style="color:rgb(0, 0, 0);">类型提示规范</font>
<font style="color:#DF2A3F;">这是什么Union？？</font>

```python
from typing import Union

def process(data: Union[str, bytes]) -> int:
    if isinstance(data, str):
        return len(data.encode('utf-8'))
    return len(data)
```

## <font style="color:rgb(0, 0, 0);">类型安全策略</font>
+ <font style="color:#DF2A3F;">使用 </font>`<font style="color:#DF2A3F;">mypy</font>`<font style="color:#DF2A3F;"> 进行静态检查</font><font style="color:rgb(0, 0, 0);">：</font>

```python
# 安装
pip install mypy

# 检查代码
mypy your_script.py
```

# <font style="color:rgb(0, 0, 0);">总结与选择建议</font>
| **<font style="color:rgb(0, 0, 0);">场景</font>** | **<font style="color:rgb(0, 0, 0);">Python 优势</font>** | **<font style="color:rgb(0, 0, 0);">Go 优势</font>** |
| :--- | :--- | :--- |
| <font style="color:rgb(0, 0, 0);">快速原型开发</font> | <font style="color:rgb(0, 0, 0);">动态类型加速开发</font> | <font style="color:rgb(0, 0, 0);">编译速度极快</font> |
| <font style="color:rgb(0, 0, 0);">数值计算</font> | <font style="color:rgb(0, 0, 0);">numpy 高性能计算库</font> | <font style="color:rgb(0, 0, 0);">原生高性能数值运算</font> |
| <font style="color:rgb(0, 0, 0);">类型敏感系统</font> | <font style="color:rgb(0, 0, 0);">通过 mypy 实现静态检查</font> | <font style="color:rgb(0, 0, 0);">原生强类型保障安全</font> |
| <font style="color:rgb(0, 0, 0);">跨平台二进制</font> | <font style="color:rgb(0, 0, 0);">需打包工具（如 PyInstaller）</font> | <font style="color:rgb(0, 0, 0);">直接编译为可执行文件</font> |


<font style="color:rgb(0, 0, 0);">  
</font>

