> å°†æ„å»ºä¸€ä¸ªä¸å¼€æº LLM èŠå¤©çš„åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨æœ€å¥½çš„å¼€æºæ¨¡å‹ä¹‹ä¸€ï¼š`Falcon 40B`ã€‚[Falcon 40B](https://www.yuque.com/qiaokate/su87gb/uu4miqpyeekuqr7o)
>

ä½¿ç”¨å¼€æº LLM æ„å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººåº”ç”¨ç¨‹åºã€‚ä½ å¯èƒ½å·²ç»ç”¨ ChatGPT èŠè¿‡å¤©äº†ï¼Œä½†è¿è¡Œå®ƒä¸ä»…æˆæœ¬é«˜æ˜‚ï¼Œäº¤äº’çš„æ¨¡å¼è¿˜è¾ƒä¸ºæ­»æ¿ã€‚è‡ªå®šä¹‰ LLM å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œåœ¨è‡ªå·±çš„æ•°æ®ä¸­è¿›è¡Œå¾®è°ƒï¼Œæˆ–è€…åœ¨äº‘ä¸Šè¿è¡Œï¼Œæˆæœ¬æ›´ä½ã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œå°†ä½¿ç”¨è¿è¡Œ "falcon-40B-Instruct "çš„æ¨ç†ç«¯ç‚¹ã€‚

ä½¿ç”¨æ–‡æœ¬ç”Ÿæˆæ¨ç†åº“åœ¨æœ¬åœ°è¿è¡Œå¾ˆæ–¹ä¾¿ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Gradio åˆ›å»ºæ¥å£ã€‚Gradio æ˜¯åŸºäº API çš„ LLMï¼Œå› æ­¤ä¸ä»…æ”¯æŒå¼€æºçš„å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Gradio ä¸ºåŸºäº API çš„ LLM åˆ›å»ºæ¥å£ï¼Œæ‰€ä»¥ä¸ä»…ä»…æ˜¯å¼€æº LLMã€‚ä½†åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œå°†é‡ç‚¹ä»‹ç»å¼€æº LLM Falcon 40Bã€‚

åŠ è½½ HF API å¯†é’¥å’Œç›¸å…³ Python åº“

```python
# å¯¼å…¥å¿…è¦çš„åº“
import os                # ç”¨äºæ“ä½œç³»ç»Ÿç›¸å…³çš„æ“ä½œï¼Œä¾‹å¦‚è¯»å–ç¯å¢ƒå˜é‡
import io                # ç”¨äºå¤„ç†æµå¼æ•°æ®ï¼ˆä¾‹å¦‚æ–‡ä»¶æµï¼‰
import IPython.display   # ç”¨äºåœ¨IPythonç¯å¢ƒä¸­æ˜¾ç¤ºæ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡
from PIL import Image    # ç”¨äºå¤„ç†å›¾åƒæ•°æ®
import base64            # ç”¨äºå¤„ç†base64ç¼–ç ï¼Œé€šå¸¸ç”¨äºç¼–ç å›¾åƒæ•°æ®
import requests          # ç”¨äºè¿›è¡ŒHTTPè¯·æ±‚ï¼Œä¾‹å¦‚GETå’ŒPOSTè¯·æ±‚

# è®¾ç½®è¯·æ±‚çš„é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º60ç§’
requests.adapters.DEFAULT_TIMEOUT = 60

# å¯¼å…¥dotenvåº“çš„å‡½æ•°
# dotenvå…è®¸æ‚¨ä».envæ–‡ä»¶ä¸­è¯»å–ç¯å¢ƒå˜é‡
# è¿™åœ¨å¼€å‘æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥é¿å…å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚APIå¯†é’¥ï¼‰ç¡¬ç¼–ç åˆ°ä»£ç ä¸­
from dotenv import load_dotenv, find_dotenv

# å¯»æ‰¾.envæ–‡ä»¶å¹¶åŠ è½½å®ƒçš„å†…å®¹
# è¿™å…è®¸æ‚¨ä½¿ç”¨os.environæ¥è¯»å–åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡
_ = load_dotenv(find_dotenv())

# ä»ç¯å¢ƒå˜é‡ä¸­è¯»å–'HF_API_KEY'å¹¶å°†å…¶å­˜å‚¨åœ¨hf_api_keyå˜é‡ä¸­
hf_api_key = os.environ['HF_API_KEY']
```

åœ¨è¿™é‡Œè®¾ç½®tokenå’Œè¾…åŠ©å‡½æ•°ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™é‡Œä½¿ç”¨äº†ä¸åŒçš„åº“ã€‚ä½¿ç”¨çš„æ˜¯æ–‡æœ¬ç”Ÿæˆåº“ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å¼€æº LLM çš„ç²¾ç®€åº“ï¼Œå¯ä»¥è®©ä½ åŒæ—¶åŠ è½½ APIï¼ˆå°±åƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨æœ¬åœ°è¿è¡Œä½ è‡ªå·±çš„ LLMã€‚

```python
# åŠ©æ‰‹å‡½æ•°

# å¯¼å…¥å¿…è¦çš„åº“
import requests        # ç”¨äºè¿›è¡ŒHTTPè¯·æ±‚
import json            # ç”¨äºå¤„ç†JSONæ•°æ®

# å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—ä¸­çš„Clientç±»
# å‡è®¾è¿™ä¸ªç±»æ˜¯ç”¨äºä¸FalcomLM-instructç«¯ç‚¹é€šä¿¡çš„
from text_generation import Client

# ä½¿ç”¨os.environä»ç¯å¢ƒå˜é‡ä¸­è·å–'HF_API_FALCOM_BASE'çš„å€¼ï¼Œè¿™åº”è¯¥æ˜¯FalcomLMçš„åŸºç¡€URL
# ä½¿ç”¨hf_api_keyä½œä¸ºèº«ä»½éªŒè¯çš„ä¸€éƒ¨åˆ†åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯å®ä¾‹
# è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ä¸º120ç§’
client = Client(os.environ['HF_API_FALCOM_BASE'], 
                headers={"Authorization": f"Basic {hf_api_key}"}, 
                timeout=120)
```

##  å»ºç«‹ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸ä»»ä½•LLMèŠå¤©
è¿™é‡Œå°†ä½¿ç”¨ä¸€ä¸ª [æ¨ç†ç«¯ç‚¹](https://huggingface.co/inference-endpoints) æ¥è°ƒç”¨ `falcon-40b-instruct` , å…¶åœ¨[ğŸ¤— å¼€æºLLMæ¦œå•](https://huggingface.co/spaces/HuggingFaceH4/open_llm_leaderboard)ä¸Šååˆ—å‰èŒ…ã€‚

å¦‚æœè¦æœ¬åœ°è°ƒç”¨å®ƒ, å¯ä»¥ä½¿ç”¨ [Transformers åº“](https://huggingface.co/docs/transformers/index) æˆ–è€… [æ–‡æœ¬ç”Ÿæˆæ¨ç†åº“](https://github.com/huggingface/text-generation-inference)

```python
# è®¾ç½®ä¸€ä¸ªä¸­æ–‡æç¤ºï¼Œè¯¥æç¤ºå°†è¢«é€åˆ°æ¨¡å‹ä¸­ç”¨äºç”Ÿæˆæ–‡æœ¬
prompt_chinese = "æ•°å­¦æ˜¯è¢«å‘æ˜è¿˜æ˜¯è¢«å‘ç°çš„ï¼Ÿ"

# è°ƒç”¨clientçš„generateæ–¹æ³•
# ä½¿ç”¨å…ˆå‰è®¾ç½®çš„ä¸­æ–‡æç¤º prompt_chinese 
# max_new_tokens å‚æ•°ç”¨äºé™åˆ¶ç”Ÿæˆçš„æ–‡æœ¬é•¿åº¦
# ç„¶åä»è¿”å›çš„ç»“æœä¸­è·å–ç”Ÿæˆçš„æ–‡æœ¬
client.generate(prompt_chinese, max_new_tokens=256).generated_text
```

<details class="lake-collapse"><summary id="ud90c2766"><span class="ne-text" style="color: rgba(0, 0, 0, 0.87)">outputï¼š</span></summary><pre data-language="json" id="iOXbm" class="ne-codeblock language-json"><code>'\næ•°å­¦æ˜¯è¢«å‘ç°çš„ï¼Œå› ä¸ºå®ƒæ˜¯è‡ªç„¶ç•Œçš„åŸºæœ¬è§„å¾‹å’Œæ¨¡å¼ã€‚äººç±»åªæ˜¯å‘ç°äº†è¿™äº›è§„å¾‹å’Œæ¨¡å¼ï¼Œå¹¶å°†å®ƒä»¬ç”¨ç¬¦å·å’Œå…¬å¼è¡¨è¾¾å‡ºæ¥ã€‚'</code></pre></details>
[ç”¨ä¸€ä¸ªç®€å•çš„ç•Œé¢å®ŒæˆNLPä»»åŠ¡](https://www.yuque.com/qiaokate/su87gb/ytfas13oxf2yyb7g)ï¼Œå®ƒæœ‰ä¸€ä¸ªæ–‡æœ¬æ¡†è¾“å…¥å’Œä¸€ä¸ªè¾“å‡ºã€‚åœ¨è¿™é‡Œï¼Œä¹Ÿå¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼ä¸ LLM èŠå¤©ã€‚å†æ¬¡å¤åˆ¶çš„promptã€‚åœ¨è¿™é‡Œï¼Œå¯ä»¥å†³å®šéœ€è¦å¤šå°‘tokenã€‚è¿™å°±æ˜¯éå¸¸ç®€å•åœ°å‘ LLM æé—®çš„æ–¹æ³•ã€‚ä½†è¿˜æ˜¯ä¸èƒ½èŠå¤©ï¼Œå› ä¸ºå¦‚æœä½ å†é—®ä¸€ä¸ªåç»­é—®é¢˜ï¼Œå®ƒå°±æ— æ³•ç†è§£æˆ–ä¿ç•™ä¸Šä¸‹æ–‡ã€‚

```python
# å›åˆ°ç¬¬ 2 è¯¾ï¼Œæ—¶é—´è¿‡å¾—çœŸå¿«ï¼
# å¯¼å…¥æ‰€éœ€çš„åº“
import gradio as gr  # ç”¨äºåˆ›å»ºWebç•Œé¢
import os  # ç”¨äºä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå¦‚è¯»å–ç¯å¢ƒå˜é‡

# å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ ¹æ®è¾“å…¥ç”Ÿæˆæ–‡æœ¬
def generate(input, slider):
    # ä½¿ç”¨é¢„å®šä¹‰çš„clientå¯¹è±¡çš„generateæ–¹æ³•ï¼Œä»è¾“å…¥ç”Ÿæˆæ–‡æœ¬
    # sliderçš„å€¼é™åˆ¶ç”Ÿæˆçš„tokençš„æ•°é‡
    output = client.generate(input, max_new_tokens=slider).generated_text
    return output  # è¿”å›ç”Ÿæˆçš„æ–‡æœ¬

# åˆ›å»ºä¸€ä¸ªWebç•Œé¢
# è¾“å…¥ï¼šä¸€ä¸ªæ–‡æœ¬æ¡†å’Œä¸€ä¸ªæ»‘å—
# è¾“å‡ºï¼šä¸€ä¸ªæ–‡æœ¬æ¡†æ˜¾ç¤ºç”Ÿæˆçš„æ–‡æœ¬
demo = gr.Interface(
    fn=generate, 
    inputs=[
        gr.Textbox(label="Prompt"),  # æ–‡æœ¬è¾“å…¥æ¡†
        gr.Slider(label="Max new tokens", value=20,  maximum=1024, minimum=1)  # æ»‘å—ç”¨äºé€‰æ‹©ç”Ÿæˆçš„tokençš„æœ€å¤§æ•°é‡
    ], 
    outputs=[gr.Textbox(label="Completion")]  # æ˜¾ç¤ºç”Ÿæˆæ–‡æœ¬çš„æ–‡æœ¬æ¡†
)

# å…³é—­å¯èƒ½å·²ç»å¯åŠ¨çš„ä»»ä½•å…ˆå‰çš„gradioå®ä¾‹
gr.close_all()

# å¯åŠ¨Webç•Œé¢
# ä½¿ç”¨ç¯å¢ƒå˜é‡PORT1ä½œä¸ºæœåŠ¡å™¨çš„ç«¯å£å·
demo.launch(share=True, server_port=int(os.environ['PORT1']))
```

å› æ­¤ï¼ŒåŸºæœ¬ä¸Šè¦åšçš„æ˜¯ï¼Œå‘æ¨¡å‹å‘é€ä¹‹å‰çš„é—®é¢˜ã€å®ƒè‡ªå·±çš„å›ç­”ä»¥åŠåç»­é—®é¢˜ã€‚ä½†å»ºç«‹æ‰€æœ‰è¿™äº›éƒ½æœ‰ç‚¹éº»çƒ¦ã€‚è¿™å°±æ˜¯ Gradio èŠå¤©æœºå™¨äººç»„ä»¶çš„ä½œç”¨æ‰€åœ¨ï¼Œå› ä¸ºå®ƒå…è®¸ç®€åŒ–å‘æ¨¡å‹å‘é€å¯¹è¯å†å²è®°å½•çš„è¿‡ç¨‹ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸ºæ­¤ï¼Œå°†å¼•å…¥ä¸€ä¸ªæ–°çš„ Gradio ç»„ä»¶--`Gradio Chatbot`ã€‚

![](https://cdn.nlark.com/yuque/0/2025/png/2639475/1736418013510-cbf0dc70-f623-4d0d-bbde-d18a86eb3956.png)

## ä½¿ç”¨ `gr.Chatbot()` æ¥åŠ©åŠ›!
å¼€å§‹ä½¿ç”¨ Gradio Chatbot ç»„ä»¶ã€‚è¿™é‡Œå®ä¾‹åŒ–äº†ä¸€ä¸ªå¸¦æœ‰æ–‡æœ¬æ¡†æç¤ºå’Œæäº¤æŒ‰é’®çš„ Gradle ChatBot ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç”¨æˆ·ç•Œé¢ã€‚ä½†ç°åœ¨è¿˜ä¸æ˜¯åœ¨å’Œ LLM èŠå¤©ã€‚

åªéœ€éšæœºé€‰æ‹©ä¸‰ä¸ªé¢„è®¾å›å¤ï¼Œç„¶åå°†æˆ‘çš„ä¿¡æ¯å’Œæœºå™¨äººçš„ä¿¡æ¯æ·»åŠ åˆ°èŠå¤©è®°å½•ä¸­ã€‚æ‰€ä»¥åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°æˆ‘å¯ä»¥è¯´ä»»ä½•è¯ï¼Œå®ƒåŸºæœ¬ä¸Šä¼šéšæœºæŸ¥çœ‹è¿™ä¸‰ä¸ªå›å¤ã€‚

```python
# å¯¼å…¥randomåº“ï¼Œç”¨äºéšæœºé€‰æ‹©æ¶ˆæ¯
import random
import gradio as gr  # ç”¨äºåˆ›å»ºWebç•Œé¢
import os  # ç”¨äºä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå¦‚è¯»å–ç¯å¢ƒå˜é‡

# å®šä¹‰æœºå™¨äººçš„å“åº”å‡½æ•°
def respond(message, chat_history):
    # éšæœºé€‰æ‹©ä¸€ä¸ªä¸­æ–‡å›å¤
    bot_message_chinese = random.choice(["å‘Šè¯‰æˆ‘æ›´å¤šä¿¡æ¯", 
                                         "é…·ï¼Œä½†æˆ‘ä¸æ„Ÿå…´è¶£", 
                                         "å—¯ï¼Œé‚£å¥½å§"])

    # éšæœºé€‰æ‹©ä¸€ä¸ªè‹±æ–‡å›å¤ (æ­¤å›å¤æœªåœ¨ç•Œé¢ä¸­ä½¿ç”¨)
    bot_message = random.choice(["Tell me more about it", 
                                 "Cool, but I'm not interested", 
                                 "Hmmmm, ok then"]) 

    # å°†ç”¨æˆ·çš„æ¶ˆæ¯å’Œæœºå™¨äººçš„ä¸­æ–‡å›å¤æ·»åŠ åˆ°èŠå¤©å†å²è®°å½•ä¸­
    chat_history.append((message, bot_message_chinese))

    # è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²å’Œæ›´æ–°åçš„èŠå¤©å†å²è®°å½•
    return "", chat_history

# ä½¿ç”¨gr.Blocks()ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å®šä¹‰ç”¨æˆ·ç•Œé¢
with gr.Blocks() as demo:
    # å®šä¹‰ä¸€ä¸ªèŠå¤©æœºå™¨äººçª—å£ï¼Œé«˜åº¦ä¸º240
    chatbot = gr.Chatbot(height=240) 
    # å®šä¹‰ä¸€ä¸ªç”¨æˆ·è¾“å…¥æ¶ˆæ¯çš„æ–‡æœ¬æ¡†
    msg = gr.Textbox(label="Prompt")
    # å®šä¹‰ä¸€ä¸ªæäº¤æŒ‰é’®
    btn = gr.Button("Submit")
    # å®šä¹‰ä¸€ä¸ªæ¸…é™¤æ–‡æœ¬æ¡†å’ŒèŠå¤©çª—å£å†…å®¹çš„æŒ‰é’®
    clear = gr.ClearButton(components=[msg, chatbot], value="Clear console")

    # å½“ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œè°ƒç”¨å“åº”å‡½æ•°
    btn.click(respond, inputs=[msg, chatbot], outputs=[msg, chatbot])
    # å½“ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­æŒ‰ä¸‹Enteré”®æ—¶ï¼Œä¹Ÿè°ƒç”¨å“åº”å‡½æ•°
    msg.submit(respond, inputs=[msg, chatbot], outputs=[msg, chatbot])

# å…³é—­å¯èƒ½å·²ç»å¯åŠ¨çš„ä»»ä½•å…ˆå‰çš„gradioå®ä¾‹
gr.close_all()

# å¯åŠ¨Webç•Œé¢
# ä½¿ç”¨ç¯å¢ƒå˜é‡PORT2ä½œä¸ºæœåŠ¡å™¨çš„ç«¯å£å·
demo.launch(share=True, server_port=int(os.environ['PORT2']))
```

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_math_with_template.png)

å¿…é¡»æ ¼å¼åŒ–èŠå¤©promptã€‚æ­¤å¤„æ­£åœ¨å®šä¹‰è¿™ä¸ªæ ¼å¼åŒ–èŠå¤©promptå‡½æ•°ã€‚ åœ¨è¿™é‡Œï¼Œè¦åšçš„å°±æ˜¯ä½¿å…¶åŒ…å«èŠå¤©å†å²è®°å½•ï¼Œè¿™æ · LLM å°±èƒ½çŸ¥é“ä¸Šä¸‹æ–‡ã€‚ ä½†è¿™è¿˜ä¸å¤Ÿã€‚è¿˜éœ€è¦å‘Šè¯‰å®ƒï¼Œå“ªäº›ä¿¡æ¯æ¥è‡ªç”¨æˆ·ï¼Œå“ªäº›ä¿¡æ¯æ¥è‡ª LLM æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯æ­£åœ¨è°ƒç”¨çš„åŠ©æ‰‹ã€‚ å› æ­¤ï¼Œè®¾ç½®äº†æ ¼å¼èŠå¤©promptåŠŸèƒ½ï¼Œåœ¨èŠå¤©è®°å½•çš„æ¯ä¸€è½®ä¸­ï¼Œéƒ½åŒ…å«ä¸€æ¡ç”¨æˆ·ä¿¡æ¯å’Œä¸€æ¡åŠ©æ‰‹ä¿¡æ¯ï¼Œä»¥ä¾¿çš„æ¨¡å‹èƒ½å‡†ç¡®å›ç­”åç»­é—®é¢˜ã€‚ ç°åœ¨ï¼Œè¦å°†æ ¼å¼åŒ–çš„promptä¼ é€’ç»™çš„ APIã€‚

```python
# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ ¼å¼åŒ–èŠå¤©æç¤ºã€‚
def format_chat_prompt(message, chat_history):
    # åˆå§‹åŒ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œç”¨äºå­˜æ”¾æ ¼å¼åŒ–åçš„èŠå¤©æç¤ºã€‚
    prompt = ""
    # éå†èŠå¤©å†å²è®°å½•ã€‚
    for turn in chat_history:
        # ä»èŠå¤©è®°å½•ä¸­æå–ç”¨æˆ·å’Œæœºå™¨äººçš„æ¶ˆæ¯ã€‚
        user_message, bot_message = turn
        # æ›´æ–°æç¤ºï¼ŒåŠ å…¥ç”¨æˆ·å’Œæœºå™¨äººçš„æ¶ˆæ¯ã€‚
        prompt = f"{prompt}\nUser: {user_message}\nAssistant: {bot_message}"
    # å°†å½“å‰çš„ç”¨æˆ·æ¶ˆæ¯ä¹ŸåŠ å…¥åˆ°æç¤ºä¸­ï¼Œå¹¶é¢„ç•™ä¸€ä¸ªä½ç½®ç»™æœºå™¨äººçš„å›å¤ã€‚
    prompt = f"{prompt}\nUser: {message}\nAssistant:"
    # è¿”å›æ ¼å¼åŒ–åçš„æç¤ºã€‚
    return prompt

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç”Ÿæˆæœºå™¨äººçš„å›å¤ã€‚
def respond(message, chat_history):
    # è°ƒç”¨ä¸Šé¢çš„å‡½æ•°ï¼Œå°†ç”¨æˆ·çš„æ¶ˆæ¯å’ŒèŠå¤©å†å²è®°å½•æ ¼å¼åŒ–ä¸ºä¸€ä¸ªæç¤ºã€‚
    formatted_prompt = format_chat_prompt(message, chat_history)
    # ä½¿ç”¨clientå¯¹è±¡çš„generateæ–¹æ³•ç”Ÿæˆæœºå™¨äººçš„å›å¤ï¼ˆæ³¨æ„ï¼šclientå¯¹è±¡åœ¨æ­¤ä»£ç ä¸­å¹¶æœªå®šä¹‰ï¼‰ã€‚
    bot_message = client.generate(formatted_prompt,
                                  max_new_tokens=1024,
                                  stop_sequences=["\nUser:", ""]).generated_text
    # å°†ç”¨æˆ·çš„æ¶ˆæ¯å’Œæœºå™¨äººçš„å›å¤åŠ å…¥åˆ°èŠå¤©å†å²è®°å½•ä¸­ã€‚
    chat_history.append((message, bot_message))
    # è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²å’Œæ›´æ–°åçš„èŠå¤©å†å²è®°å½•ï¼ˆè¿™é‡Œçš„ç©ºå­—ç¬¦ä¸²å¯ä»¥æ›¿æ¢ä¸ºçœŸæ­£çš„æœºå™¨äººå›å¤ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼‰ã€‚
    return "", chat_history

# ä¸‹é¢çš„ä»£ç æ˜¯è®¾ç½®Gradioç•Œé¢çš„éƒ¨åˆ†ã€‚

# ä½¿ç”¨Gradioçš„BlocksåŠŸèƒ½å®šä¹‰ä¸€ä¸ªä»£ç å—ã€‚
with gr.Blocks() as demo:
    # åˆ›å»ºä¸€ä¸ªGradioèŠå¤©æœºå™¨äººç»„ä»¶ï¼Œè®¾ç½®å…¶é«˜åº¦ä¸º240ã€‚
    chatbot = gr.Chatbot(height=240) 
    # åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ¡†ç»„ä»¶ï¼Œç”¨äºè¾“å…¥æç¤ºã€‚
    msg = gr.Textbox(label="Prompt")
    # åˆ›å»ºä¸€ä¸ªæäº¤æŒ‰é’®ã€‚
    btn = gr.Button("Submit")
    # åˆ›å»ºä¸€ä¸ªæ¸…é™¤æŒ‰é’®ï¼Œç”¨äºæ¸…é™¤æ–‡æœ¬æ¡†å’ŒèŠå¤©æœºå™¨äººç»„ä»¶çš„å†…å®¹ã€‚
    clear = gr.ClearButton(components=[msg, chatbot], value="Clear console")

    # è®¾ç½®æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ã€‚å½“ç‚¹å‡»æ—¶ï¼Œè°ƒç”¨ä¸Šé¢å®šä¹‰çš„respondå‡½æ•°ï¼Œå¹¶ä¼ å…¥ç”¨æˆ·çš„æ¶ˆæ¯å’ŒèŠå¤©å†å²è®°å½•ï¼Œç„¶åæ›´æ–°æ–‡æœ¬æ¡†å’ŒèŠå¤©æœºå™¨äººç»„ä»¶ã€‚
    btn.click(respond, inputs=[msg, chatbot], outputs=[msg, chatbot])
    # è®¾ç½®æ–‡æœ¬æ¡†çš„æäº¤äº‹ä»¶ï¼ˆå³æŒ‰ä¸‹Enteré”®æ—¶ï¼‰ã€‚åŠŸèƒ½ä¸ä¸Šé¢çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›¸åŒã€‚
    msg.submit(respond, inputs=[msg, chatbot], outputs=[msg, chatbot]) 

# å…³é—­æ‰€æœ‰å·²ç»å­˜åœ¨çš„Gradioå®ä¾‹ã€‚
gr.close_all()
# å¯åŠ¨æ–°çš„Gradioåº”ç”¨ï¼Œè®¾ç½®åˆ†äº«åŠŸèƒ½ä¸ºTrueï¼Œå¹¶ä½¿ç”¨ç¯å¢ƒå˜é‡PORT3æŒ‡å®šæœåŠ¡å™¨ç«¯å£ã€‚
demo.launch(share=True, server_port=int(os.environ['PORT3']))
```

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_animal.png)

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_animal_in_context.png)

ç°åœ¨ï¼Œçš„èŠå¤©æœºå™¨äººåº”è¯¥å¯ä»¥å›ç­”åç»­é—®é¢˜äº†ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå‘å®ƒå‘é€äº†ä¸Šä¸‹æ–‡ã€‚å‘å®ƒå‘é€äº†ä¿¡æ¯ï¼Œç„¶åè¦æ±‚å®ƒå®Œæˆã€‚ä¸€æ—¦è¿›å…¥å¦ä¸€ä¸ªè¿­ä»£å¾ªç¯ï¼Œå°±ä¼šå‘å®ƒå‘é€çš„æ•´ä¸ªä¸Šä¸‹æ–‡ï¼Œç„¶åè¦æ±‚å®ƒå®Œæˆã€‚è¿™å¾ˆé…·ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸€ç›´è¿™æ ·è¿­ä»£ä¸‹å»ï¼Œé‚£ä¹ˆæ¨¡å‹åœ¨ä¸€æ¬¡å¯¹è¯ä¸­æ‰€èƒ½æ¥å—çš„ä¿¡æ¯é‡å°±ä¼šè¾¾åˆ°æé™ï¼Œå› ä¸ºæ€»æ˜¯ç»™å®ƒè¶Šæ¥è¶Šå¤šçš„ä¹‹å‰å¯¹è¯çš„å†…å®¹ã€‚

ä¸ºäº†è®©æ¨¡å‹å‘æŒ¥æœ€å¤§ä½œç”¨ï¼Œå¯ä»¥åœ¨è¿™é‡Œå°†æœ€å¤§tokenæ•°`max_new_tokens`è®¾ç½®ä¸º 1024ã€ è¿™æ˜¯åœ¨ API ä¸­è¿è¡Œçš„ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼Œè¯¥æ¨¡å‹æ‰€èƒ½æ¥å—çš„æœ€å¤§å€¼ã€‚

å¯ä»¥å°è¯•ä»¥ä¸‹promptï¼š

1. å“ªäº›åŠ¨ç‰©ç”Ÿæ´»åœ¨çƒ­å¸¦è‰åŸï¼Ÿ
2. è¿™ä¹‹ä¸­å“ªç§åŠ¨ç‰©æœ€å¼ºå£®ï¼Ÿ

è¿™é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ªç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„ç”¨æˆ·ç•Œé¢ï¼Œç”¨äºä¸LLMèŠå¤©ã€‚å¦‚æœéœ€è¦è¿›ä¸€æ­¥Gradio æ‰€èƒ½æä¾›çš„æœ€ä½³åŠŸèƒ½ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«æ›´å¤šåŠŸèƒ½çš„ç”¨æˆ·ç•Œé¢ã€‚

## æ·»åŠ å…¶ä»–é«˜çº§åŠŸèƒ½
```python
# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ ¼å¼åŒ–èŠå¤©æç¤ºã€‚
def format_chat_prompt(message, chat_history, instruction):
    # åˆå§‹åŒ–æç¤ºï¼ŒåŠ å…¥ç³»ç»ŸæŒ‡ä»¤ã€‚
    prompt = f"System:{instruction}"
    # éå†èŠå¤©å†å²è®°å½•ã€‚
    for turn in chat_history:
        # ä»èŠå¤©è®°å½•ä¸­æå–ç”¨æˆ·å’Œæœºå™¨äººçš„æ¶ˆæ¯ã€‚
        user_message, bot_message = turn
        # æ›´æ–°æç¤ºï¼ŒåŠ å…¥ç”¨æˆ·å’Œæœºå™¨äººçš„æ¶ˆæ¯ã€‚
        prompt = f"{prompt}\nUser: {user_message}\nAssistant: {bot_message}"
    # å°†å½“å‰çš„ç”¨æˆ·æ¶ˆæ¯ä¹ŸåŠ å…¥åˆ°æç¤ºä¸­ï¼Œå¹¶é¢„ç•™ä¸€ä¸ªä½ç½®ç»™æœºå™¨äººçš„å›å¤ã€‚
    prompt = f"{prompt}\nUser: {message}\nAssistant:"
    # è¿”å›æ ¼å¼åŒ–åçš„æç¤ºã€‚
    return prompt

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç”Ÿæˆæœºå™¨äººçš„å›å¤ã€‚
def respond(message, chat_history, instruction, temperature=0.7):
    # è°ƒç”¨ä¸Šé¢çš„å‡½æ•°ï¼Œå°†ç”¨æˆ·çš„æ¶ˆæ¯ã€èŠå¤©å†å²è®°å½•å’Œç³»ç»ŸæŒ‡ä»¤æ ¼å¼åŒ–ä¸ºä¸€ä¸ªæç¤ºã€‚
    prompt = format_chat_prompt(message, chat_history, instruction)
    # æ›´æ–°èŠå¤©å†å²è®°å½•ï¼Œå…ˆåŠ å…¥ç”¨æˆ·çš„æ¶ˆæ¯ï¼ˆæœºå™¨äººçš„å›å¤éƒ¨åˆ†å…ˆä¸ºç©ºï¼‰ã€‚
    chat_history = chat_history + [[message, ""]]
    # ä½¿ç”¨clientå¯¹è±¡çš„generate_streamæ–¹æ³•ç”Ÿæˆæœºå™¨äººçš„å›å¤ï¼ˆæ³¨æ„ï¼šclientå¯¹è±¡åœ¨æ­¤ä»£ç ä¸­å¹¶æœªå®šä¹‰ï¼‰ã€‚
    stream = client.generate_stream(prompt,
                                    max_new_tokens=1024,
                                    stop_sequences=["\nUser:", ""], 
                                    temperature=temperature)  # è®¾ç½®ç”Ÿæˆå›å¤çš„æ¸©åº¦ï¼Œå†³å®šå›å¤çš„éšæœºæ€§ã€‚
    acc_text = ""
    # ä½¿ç”¨æµå¼å¤„ç†è·å–æœºå™¨äººçš„å›å¤ã€‚
    for idx, response in enumerate(stream):
        text_token = response.token.text

        # å¦‚æœæœ‰ä»»ä½•è¯¦æƒ…ä¿¡æ¯ï¼Œç›´æ¥è¿”å›ã€‚
        if response.details:
            return

        # å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªä»¤ç‰Œå¹¶ä¸”å®ƒä»¥ç©ºæ ¼å¼€å§‹ï¼Œåˆ™å»é™¤è¯¥ç©ºæ ¼ã€‚
        if idx == 0 and text_token.startswith(" "):
            text_token = text_token[1:]

        # ç´¯ç§¯ç”Ÿæˆçš„æ–‡æœ¬ã€‚
        acc_text += text_token
        # æ›´æ–°æœ€åä¸€è½®çš„èŠå¤©è®°å½•ã€‚
        last_turn = list(chat_history.pop(-1))
        last_turn[-1] += acc_text
        chat_history = chat_history + [last_turn]
        yield "", chat_history
        acc_text = ""

# è®¾ç½®Gradioç•Œé¢éƒ¨åˆ†ã€‚
with gr.Blocks() as demo:
    # åˆ›å»ºä¸€ä¸ªGradioèŠå¤©æœºå™¨äººç»„ä»¶ï¼Œå¹¶è®¾ç½®å…¶é«˜åº¦ã€‚
    chatbot = gr.Chatbot(height=240)
    # åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ¡†ç»„ä»¶ï¼Œç”¨äºè¾“å…¥æç¤ºã€‚
    msg = gr.Textbox(label="Prompt")
    # åˆ›å»ºä¸€ä¸ªå¯æŠ˜å ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºé«˜çº§é€‰é¡¹ã€‚
    with gr.Accordion(label="Advanced options", open=False):
        # åœ¨å¯æŠ˜å ç»„ä»¶å†…åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œç”¨äºè¾“å…¥ç³»ç»Ÿæ¶ˆæ¯ã€‚
        system = gr.Textbox(label="System message", lines=2, value="ä¸€æ®µç”¨æˆ·å’ŒåŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ³•å¾‹åŠ©æ‰‹çš„å¯¹è¯. åŠ©æ‰‹ä¼šç»™å‡ºçœŸå®ä¸”æœ‰å¸®åŠ©çš„å›ç­”.")
        # åˆ›å»ºä¸€ä¸ªæ»‘å—ï¼Œç”¨äºè°ƒæ•´å›å¤çš„æ¸©åº¦ã€‚
        temperature = gr.Slider(label="temperature", minimum=0.1, maximum=1, value=0.7, step=0.1)
    # åˆ›å»ºä¸€ä¸ªæäº¤æŒ‰é’®ã€‚
    btn = gr.Button("Submit")
    # åˆ›å»ºä¸€ä¸ªæ¸…é™¤æŒ‰é’®ï¼Œç”¨äºæ¸…é™¤æ–‡æœ¬æ¡†å’ŒèŠå¤©æœºå™¨äººç»„ä»¶çš„å†…å®¹ã€‚
    clear = gr.ClearButton(components=[msg, chatbot], value="Clear console")

    # è®¾ç½®æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ã€‚å½“ç‚¹å‡»æ—¶ï¼Œè°ƒç”¨ä¸Šé¢å®šä¹‰çš„respondå‡½æ•°ï¼Œå¹¶ä¼ å…¥ç”¨æˆ·çš„æ¶ˆæ¯ã€èŠå¤©å†å²è®°å½•å’Œç³»ç»Ÿæ¶ˆæ¯ï¼Œç„¶åæ›´æ–°æ–‡æœ¬æ¡†å’ŒèŠå¤©æœºå™¨äººç»„ä»¶ã€‚
    btn.click(respond, inputs=[msg, chatbot, system], outputs=[msg, chatbot])
    # è®¾ç½®æ–‡æœ¬æ¡†çš„æäº¤äº‹ä»¶ï¼ˆå³æŒ‰ä¸‹Enteré”®æ—¶ï¼‰ã€‚åŠŸèƒ½ä¸ä¸Šé¢çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç›¸åŒã€‚
    msg.submit(respond, inputs=[msg, chatbot, system], outputs=[msg, chatbot])
```

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_law_1.png)

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_law_2.png)

![](https://raw.githubusercontent.com/datawhalechina/llm-cookbook/54ad6728cde23add6e96b1f521ace605b5e60ca3/content/%E9%80%89%E4%BF%AE-Building%20Generative%20AI%20Applications%20with%20Gradio/images/ch06_law_3.png)

åœ¨è¿™é‡Œï¼Œæœ‰é«˜çº§é€‰é¡¹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ï¼Œå®ƒå¯ä»¥è®¾ç½® LLM ä¸ä½ èŠå¤©çš„æ¨¡å¼ã€‚ å› æ­¤ï¼Œåœ¨ç³»ç»Ÿæ¶ˆæ¯ä¸­ï¼Œä½ å¯ä»¥è¯´ï¼Œä¾‹å¦‚ï¼Œä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„åŠ©æ‰‹ï¼Œæˆ–è€…ä½ å¯ä»¥ç»™å®ƒä¸€ä¸ªç‰¹å®šçš„è¯­æ°”ï¼Œä¸€ä¸ªç‰¹å®šçš„è¯­è°ƒï¼Œ ä½ å¸Œæœ›å®ƒæ›´æœ‰è¶£ä¸€ç‚¹ï¼Œæ›´ä¸¥è‚ƒä¸€ç‚¹ï¼Œä½ çœŸçš„å¯ä»¥åå¤è°ƒè¯•ç³»ç»Ÿæ¶ˆæ¯æç¤ºï¼Œçœ‹çœ‹å®ƒå¯¹ä½ çš„æ¶ˆæ¯æœ‰ä»€ä¹ˆå½±å“ã€‚

æœ‰äº›äººç”šè‡³ä¼šæƒ³ç»™ LLM ä¸€ä¸ªè§’è‰²ï¼Œæ¯”å¦‚ä½ æ˜¯ä¸€ä¸ªæä¾›æ³•å¾‹å»ºè®®çš„å¾‹å¸ˆï¼Œæˆ–è€…ä½ æ˜¯ä¸€ä¸ªæä¾›åŒ»ç–—å»ºè®®çš„åŒ»ç”Ÿï¼Œ ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼ŒLLM ä¼šä»¥ä¸€ç§å¬èµ·æ¥å¾ˆçœŸå®çš„æ–¹å¼æä¾›è™šå‡ä¿¡æ¯ã€‚ å› æ­¤ï¼Œå°½ç®¡ä½¿ç”¨Falcon 40B è¿›è¡Œå®éªŒå’Œæ¢ç´¢ä¼šå¾ˆæœ‰è¶£ï¼Œä½†åœ¨ç°å®ä¸–ç•Œçš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¿…é¡»ä¸ºæ­¤ç±»ä½¿ç”¨æ¡ˆä¾‹åˆ¶å®šè¿›ä¸€æ­¥çš„ä¿éšœæªæ–½ã€‚

è¿˜æœ‰å…¶ä»–é«˜çº§å‚æ•°ï¼Œæ¯”å¦‚è¿™é‡Œçš„æ¸©åº¦ã€‚ æ¸©åº¦åŸºæœ¬ä¸Šå°±æ˜¯ä½ å¸Œæœ›æ¨¡å‹çš„å˜åŒ–ç¨‹åº¦ã€‚å› æ­¤ï¼Œå¦‚æœå°†æ¸©åº¦è®¾ä¸ºé›¶ï¼Œæ¨¡å‹å°±ä¼šå€¾å‘äºå§‹ç»ˆå¯¹ç›¸åŒçš„è¾“å…¥åšå‡ºç›¸åŒçš„ååº”ã€‚ æ‰€ä»¥åŒæ ·çš„é—®é¢˜ï¼ŒåŒæ ·çš„ç­”æ¡ˆã€‚æ¸©åº¦è¶Šé«˜ï¼Œä¿¡æ¯çš„å˜åŒ–å°±è¶Šå¤šã€‚ä½†å¦‚æœæ¸©åº¦è¿‡é«˜ï¼Œå®ƒå°±ä¼šå¼€å§‹ç»™å‡ºæ— æ„ä¹‰çš„ç­”æ¡ˆã€‚ å› æ­¤ï¼Œ0.7 æ˜¯ä¸€ä¸ªä¸é”™çš„é»˜è®¤å‚æ•°ï¼Œä½†é¼“åŠ±ä½ å¤šåšå°è¯•ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸ªç”¨æˆ·ç•Œé¢è¿˜èƒ½è®©è¿›è¡Œæµå¼ä¼ è¾“å›å¤ã€‚ å®ƒé€ä¸ªtokenå‘é€ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå®æ—¶å®Œæˆã€‚å› æ­¤ï¼Œä¸éœ€è¦ç­‰åˆ°æ•´ä¸ªç­”æ¡ˆéƒ½å‡†å¤‡å¥½äº†ã€‚åœ¨è¿™é‡Œï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯å¦‚ä½•å®Œæˆçš„ã€‚å¦‚æœä½ ä¸ç†è§£è¿™é‡Œçš„æ‰€æœ‰å†…å®¹ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºçš„ç›®çš„æ˜¯ç”¨ä¸€ä¸ªéå¸¸å®Œæ•´çš„ç”¨æˆ·ç•Œé¢æ¥ç»“æŸè¯¾ç¨‹ï¼Œå¹¶æä¾›LLMæ–¹é¢çš„æ‰€æœ‰åŠŸèƒ½ã€‚

åœ¨æ ¼å¼èŠå¤©æç¤ºä¸­ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰ä½¿ç”¨çš„åŠŸèƒ½ä¸­ï¼Œæ·»åŠ äº†ä¸€ä¸ªæ–°å…ƒç´ ï¼Œé‚£å°±æ˜¯ç³»ç»ŸæŒ‡ä»¤ã€‚å› æ­¤ï¼Œåœ¨å¼€å§‹ç”¨æˆ·åŠ©æ‰‹å¯¹è¯ä¹‹å‰ï¼Œåœ¨ç³»ç»Ÿé¡¶éƒ¨æ·»åŠ äº†ä¸€ä¸ªæŒ‡ä»¤ã€‚å› æ­¤ï¼ŒåŸºæœ¬ä¸Šåœ¨å‘é€ç»™æ¨¡å‹çš„æ¯æ¡ä¿¡æ¯çš„å¼€å¤´ï¼Œéƒ½ä¼šæœ‰è®¾ç½®çš„ç³»ç»Ÿä¿¡æ¯ã€‚åœ¨è¿™é‡Œï¼Œè°ƒç”¨æ–‡æœ¬ç”Ÿæˆåº“çš„`generate_stream`å‡½æ•°ã€‚è€Œ `generate_stream`å‡½æ•°çš„ä½œç”¨å°±æ˜¯é€ä¸ªç”Ÿæˆå“åº”æ ‡è®°ã€‚å› æ­¤ï¼Œåœ¨è¿™ä¸ªå¾ªç¯ä¸­ï¼Œå‘ç”Ÿçš„äº‹æƒ…å°±æ˜¯æŒ‰æ ‡è®°ç”Ÿæˆå“åº”æ ‡è®°ï¼Œå°†å…¶æ·»åŠ åˆ°èŠå¤©è®°å½•ä¸­ï¼Œç„¶åå°†å…¶è¿”å›ç»™å‡½æ•°ã€‚

```python
# å…³é—­å¯èƒ½å·²ç»å¯åŠ¨çš„ä»»ä½•å…ˆå‰çš„gradioå®ä¾‹
gr.close_all()
```

## è‹±æ–‡
```python
prompt = "Has math been invented or discovered?"
client.generate(prompt, max_new_tokens=256).generated_text
```

<details class="lake-collapse"><summary id="u38fabcdb"><span class="ne-text" style="color: rgba(0, 0, 0, 0.87)">outputï¼š</span></summary><pre data-language="json" id="zoCvf" class="ne-codeblock language-json"><code>'\nMath has been both invented and discovered. It is a human invention in the sense that it is a system of rules and concepts that we have created to help us understand the world around us. However, it is also a discovery in the sense that it is a fundamental aspect of the universe that we have uncovered through our observations and experiments.'</code></pre></details>
