> 必要的环境配置指南：
>
> + 代码环境配置
> + vscode 代码编辑器的 Python 环境配置
> + conda 环境
>

#  配置指南
+ **基础环境配置**：适用于环境配置**初学者**或**新的服务器环境（如阿里云）**。有如何生成 SSH key 并添加到 GitHub，以及在安装和初始化 conda 环境。
+ **通用环境配置**：适用于**有一定经验的用户**、**已有环境基础**的本地安装或**完全独立的环境（如 GitHub Codespace）**。介绍了如何新建和激活 conda 虚拟环境，克隆项目仓库，切换到项目目录，以及安装所需的 Python 包。为了加速 Python 包的安装，我们还提供了一些国内镜像源。_对于完全独立的环境，可以跳过前两步关于虚拟环境（conda）配置的步骤_。

# 基础环境配置(配置 git 和 conda)
## 生成 ssh key
```shell
ssh-keygen -t rsa -C "youremail@example.com"
```

## 将公钥添加到 github
```shell
cat ~/.ssh/id_rsa.pub
```

复制输出内容，打开 github，点击右上角头像，选择 `settings` -> `SSH and GPG keys` -> `New SSH key`，将复制的内容粘贴到 key 中，点击 `Add SSH key`。  
![](../figures/C1-1-github_ssh.png)![](https://cdn.nlark.com/yuque/0/2025/png/2639475/1736477215752-51bea01f-b971-4fef-918a-e415f8bf210e.png)

## 安装 conda 环境
### linux 环境（通常采用 linux 环境）
#### 安装
```shell
mkdir -p ~/miniconda3
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm -rf ~/miniconda3/miniconda.sh
```

#### 初始化
```shell
~/miniconda3/bin/conda init bash
~/miniconda3/bin/conda init zsh
```

#### 检查 
新建终端，检查 conda 是否安装成功 

```shell
conda --version
```

### macOS 环境
#### 安装
```shell
mkdir -p ~/miniconda3
curl https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-arm64.sh -o ~/miniconda3/miniconda.sh
bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
rm -rf ~/miniconda3/miniconda.sh
```

#### 初始化
```shell
~/miniconda3/bin/conda init bash
~/miniconda3/bin/conda init zsh
```

#### 检查 
新建终端，检查 conda 是否安装成功 

```shell
conda --version
```

### windows 环境
#### 下载
```shell
curl https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe -o miniconda.exe
```

#### 安装
点击下载好的`miniconda.exe`，安装指引进行安装

#### 检查 
打开菜单中的 Anaconda Prompt，检查 conda 是否安装成功 

```shell
conda --version
```

> PS： 删除安装包：`del miniconda.exe`
>

# 通用环境配置
## 新建和激活 conda 虚拟环境
### 新建虚拟环境
```shell
conda create -n llm-universe python=3.10
conda init
source ~/.bashrc
```

![](https://cdn.nlark.com/yuque/0/2024/png/2639475/1735539273836-7c40322e-6e9d-40dc-a011-95a3a84516dd.png)

### 激活虚拟环境
```shell
conda activate llm-universe
```

### 克隆仓库
```shell
git clone git@github.com:datawhalechina/llm-universe.git
```

### 安装所需的包
1. 切换目录

```shell
cd llm-universe
```

![](https://cdn.nlark.com/yuque/0/2024/png/2639475/1735539214541-72c35219-2032-41dd-b683-b961ea47eff7.png)

2. 安装所需的包

```shell
pip install -r requirements.txt
```

![](https://cdn.nlark.com/yuque/0/2024/png/2639475/1735539198379-6bf06f85-86d3-416e-8bd1-9304131470ad.png)  
或者可以通过清华源加速安装

```shell
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

> 这里列出了常用的国内镜像源，镜像源不太稳定时，可以按需切换：  
清华：[https://pypi.tuna.tsinghua.edu.cn/simple/](https://pypi.tuna.tsinghua.edu.cn/simple/)  
阿里云：[http://mirrors.aliyun.com/pypi/simple/](http://mirrors.aliyun.com/pypi/simple/)  
中国科技大学：[https://pypi.mirrors.ustc.edu.cn/simple/](https://pypi.mirrors.ustc.edu.cn/simple/)  
华中科技大学：[http://pypi.hustunique.com/simple/](http://pypi.hustunique.com/simple/)  
上海交通大学：[https://mirror.sjtu.edu.cn/pypi/web/simple/](https://mirror.sjtu.edu.cn/pypi/web/simple/)  
豆瓣：[http://pypi.douban.com/simple](http://pypi.douban.com/simple)
>

## VSCode 配置 Python 环境
1. 安装 `Python` 插件本教程基于 `Python` 语言开发， 为了更好的开发体验，我们需要安装 Python 插件。在插件市场中搜索`Python`，找到`Python`插件并安装。
2. 安装 `Jupyter` 插件，在插件市场中搜索`Jupyter`，找到`Jupyter`插件并安装。
3. 为`Jupyter Notebook`配置 `Python` 环境
+ 打开一个 `Jupyter Notebook`
+ 点击右上角的 `**选择 Python 解释器（显示内容会根据选择环境的名称变化）**`，进行当前 `Jupyter Notebook` 的 `Python` 环境的选择。
+ 点击`选择 Python` 后进入环境列表，并选择我们配置好的环境 `llm-universe`。

![](https://cdn.nlark.com/yuque/0/2024/png/2639475/1735539395179-0a763d2c-dfd1-4275-853d-a3b6542fbabb.png)

##  其他资源下载
### 下载 `NLTK` 相关资源
在使用开源词向量模型构建开源词向量的时候，需要用到第三方库 `nltk` 的一些资源。正常情况下，会自动从互联网上下载，但可能由于网络原因会导致下载中断。使用 `nltk` 时就会报错。此处从国内仓库镜像地址下载相关资源。用以下命令下载 `nltk` 资源并解压：

```shell
cd /root
git clone https://gitee.com/yzy0612/nltk_data.git  --branch gh-pages
cd nltk_data
mv packages/*  ./
cd tokenizers
unzip punkt.zip
cd ../taggers
unzip averaged_perceptron_tagger.zip
```

